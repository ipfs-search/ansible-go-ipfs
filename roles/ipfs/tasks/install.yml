---
- name: create install user '{{ ipfs_install_user }}'
  user:
    name: "{{ ipfs_install_user }}"
    comment: "ipfs install user"
    state: present
- name: check whether {{ ipfs_binary }} exists # noqa 503
  # For extra robustness, e.g. when build fails and clone doesn't update
  stat:
    path: "{{ ipfs_binary }}"
    get_attributes: false
    get_checksum: false
    get_mime: false
  register: ipfs_binary_stat
- name: install from build
  include_tasks: install_build.yml
  when: ipfs_build
- name: install from dist
  include_tasks: install_dist.yml
  when: not ipfs_build
